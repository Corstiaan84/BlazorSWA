@using System.Net
@inject HttpClient Http

@((MarkupString)svgMarkup)

@code {
    [Parameter]
    public string Url { get; set; } = "https://theurlist.com";

    private string svgMarkup = "";

    protected override async Task OnInitializedAsync()
    {
        if (!string.IsNullOrEmpty(Url))
        {
            var encodedUrl = WebUtility.UrlEncode(Url);

            var response = await Http.GetAsync($"api/qrcode/{encodedUrl}");
            if (response.IsSuccessStatusCode)
            {
                svgMarkup = await response.Content.ReadAsStringAsync();
            }
        }
    }
}